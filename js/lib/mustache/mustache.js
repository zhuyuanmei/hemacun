define(function(e,n,r){var t="undefined"!=typeof r&&r.exports||{};!function(e){function n(e){return k.test(e)}function r(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return w[e]||e})}function t(e,n,r,t){t=t||"<template>";for(var a,o=n.split("\n"),f=Math.max(r-3,0),u=Math.min(o.length,r+3),i=o.slice(f,u),l=0,c=i.length;c>l;++l)a=l+f+1,i[l]=(a===r?" >> ":"    ")+i[l];return e.template=n,e.line=r,e.file=t,e.message=[t+":"+r,i.join("\n"),"",e.message].join("\n"),e}function a(e,n,r){if("."===e)return n[n.length-1];for(var t,a,o,f,u=e.split("."),i=u.length-1,l=u[i],c=n.length;c;){for(f=n.slice(0),a=n[--c],o=0;i>o&&(a=a[u[o++]],null!=a);)f.push(a);if(a&&"object"==typeof a&&l in a){t=a[l];break}}return"function"==typeof t&&(t=t.call(f[f.length-1])),null==t?r:t}function o(e,n,r,t){var o="",f=a(e,n);if(t)(null==f||f===!1||s(f)&&0===f.length)&&(o+=r());else if(s(f))v(f,function(e){n.push(e),o+=r(),n.pop()});else if("object"==typeof f)n.push(f),o+=r(),n.pop();else if("function"==typeof f){var u=n[n.length-1],i=function(e){return c(e,u)};o+=f.call(u,r(),i)||""}else f&&(o+=r());return o}function f(r,a){a=a||{};for(var o,f,u,i,l,c=a.tags||e.tags,s=c[0],p=c[c.length-1],h=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],g=[],b=!1,v=!1,k=function(){if(!b||v||a.space)g=[];else for(;g.length;)h.splice(g.pop(),1);b=!1,v=!1},m=[],y=function(e){c=d(e).split(/\s+/),f=c[0],u=c[c.length-1]},w=function(e){h.push('";',o,'\nvar partial = partials["'+d(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},S=function(e,n){var f=d(e);if(""===f)throw t(new Error("Section name may not be empty"),r,M,a.file);m.push({name:f,inverted:n}),h.push('";',o,'\nvar name = "'+f+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},j=function(e){S(e,!0)},x=function(e){var n=d(e),o=0!=m.length&&m[m.length-1].name;if(!o||n!=o)throw t(new Error('Section named "'+n+'" was never opened'),r,M,a.file);var f=m.pop();h.push('";',"\n    return buffer;","\n  };","\n})();"),h.push(f.inverted?"\nbuffer += renderSection(name,stack,callback,true);":"\nbuffer += renderSection(name,stack,callback);"),h.push('\nbuffer += "')},A=function(e){h.push('";',o,'\nbuffer += lookup("'+d(e)+'",stack,"");','\nbuffer += "')},E=function(e){h.push('";',o,'\nbuffer += escapeHTML(lookup("'+d(e)+'",stack,""));','\nbuffer += "')},M=1,O=0,T=r.length;T>O;++O)if(r.slice(O,O+s.length)===s){switch(O+=s.length,i=r.substr(O,1),o="\nline = "+M+";",f=s,u=p,b=!0,i){case"!":O++,l=null;break;case"=":O++,p="="+p,l=y;break;case">":O++,l=w;break;case"#":O++,l=S;break;case"^":O++,l=j;break;case"/":O++,l=x;break;case"{":p="}"+p;case"&":O++,v=!0,l=A;break;default:v=!0,l=E}var $=r.indexOf(p,O);if(-1===$)throw t(new Error('Tag "'+s+'" was not closed properly'),r,M,a.file);var H=r.substring(O,$);l&&l(H);for(var L=0;~(L=H.indexOf("\n",L));)M++,L++;O=$+p.length-1,s=f,p=u}else switch(i=r.substr(O,1)){case'"':case"\\":v=!0,h.push("\\"+i);break;case"\r":break;case"\n":g.push(h.length),h.push("\\n"),k(),M++;break;default:n(i)?g.push(h.length):v=!0,h.push(i)}if(0!=m.length)throw t(new Error('Section "'+m[m.length-1].name+'" was not closed properly'),r,M,a.file);k(),h.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var q=h.join("").replace(/buffer \+= "";\n/g,"");return a.debug&&("undefined"!=typeof console&&console.log?console.log(q):"function"==typeof print&&print(q)),q}function u(e,n){var u="view,partials,stack,lookup,escapeHTML,renderSection,render",i=f(e,n),l=new Function(u,i);return function(f,u){u=u||{};var i=[f];try{return l(f,u,i,a,r,o,c)}catch(s){throw t(s.error,e,s.line,n.file)}}}function i(){S={}}function l(e,n){return n=n||{},n.cache!==!1?(S[e]||(S[e]=u(e,n)),S[e]):u(e,n)}function c(e,n,r){return l(e)(n,r)}e.name="mustache.js",e.version="0.5.0-dev",e.tags=["{{","}}"],e.parse=f,e.compile=l,e.render=c,e.clearCache=i,e.to_html=function(e,n,r,t){var a=c(e,n,r);return"function"!=typeof t?a:void t(a)};var s,p=Object.prototype.toString,h=Array.isArray,g=Array.prototype.forEach,b=String.prototype.trim;s=h?h:function(e){return"[object Array]"===p.call(e)};var v;v=g?function(e,n,r){return g.call(e,n,r)}:function(e,n,r){for(var t=0,a=e.length;a>t;++t)n.call(r,e[t],t,e)};var d,k=/^\s*$/;if(b)d=function(e){return null==e?"":b.call(e)};else{var m,y;n("Â ")?(m=/^\s+/,y=/\s+$/):(m=/^[\s\xA0]+/,y=/[\s\xA0]+$/),d=function(e){return null==e?"":String(e).replace(m,"").replace(y,"")}}var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S={}}(t),r.exports=t});